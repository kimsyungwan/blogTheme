/* Base reset & variables */
:root{
  --primary-color:#ffffff;
  --bg:#ffffff;
  --text:#111111;
  --appbar-height:56px;
  --tabbar-height:60px;
  --transition:220ms ease;
  /* font-family: system-ui, -apple-system, Segoe UI, Roboto, Pretendard, sans-serif; */
}
*{box-sizing:border-box}
html,body{height:100dvh;margin:0;background:var(--bg);color:var(--text)}
/*a 태그 선택시 기본 디자인 제거 */
a{text-decoration:none;color:inherit}
/*a태그 셀렉트시 기본 디자인 제거 */
a:focus{outline:none;}

/* Appbar / Tabbar */
.appbar{
  background:rgba(255, 255, 255, 0.7);
  height:calc(var(--appbar-height) + env(safe-area-inset-top));
  display:flex;
  align-items:center;
  gap:8px;
  padding:env(safe-area-inset-top) 10px 0 10px;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  z-index: 10;
}
.appbar-left{
  left:10px;
}
.appbar-right{
  position:absolute;
  top:calc(env(safe-area-inset-top) + 18px);
  right:10px;
}
.appbar.appheader{ z-index: 201; }
.appbar .title{font-weight:700;font-size:20px;}
.appbar button{
  background:none;
  border:none;
  padding:0;
  margin:0;
  cursor:pointer;
  color:#060505;
  font-size:18px;
}
.tabbar{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  height:calc(var(--tabbar-height) + env(safe-area-inset-bottom));
  display:flex;justify-content:space-around;
  border-top:1px solid #e9e9e9;
  z-index: 10;
  background:rgba(255, 255, 255, 0.7);
  transition: transform var(--transition);
}
/*.tabbar a 선택 하면 하이라이트, 배경이 안보이게 */
.tabbar a:focus, .tabbar a:active, .tabbar a:hover{
  outline:none;background:none;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}
.tabbar a{flex:1;text-align:center;text-decoration:none;color:#060505;padding:8px 0}
.tabbar a.active{color:var(--primary-color);font-weight:600}
.tabbar a .icon span{font-size:20px;}
.tabbar a span{font-size:13px;}
.tabbar.hide{ transform: translateY(100%); }
.view{
  height:100dvh;
}

/* Views (absolute slide transition) */
.desktop-mode .views{
  position:relative;
  min-height:100dvh;
  overflow:auto; /* 전환 중 튀어나오는 부분 숨김 */
  padding:0px !important;
}

.mobile-mode .views{
  position:relative;
  min-height:calc(100dvh - var(--appbar-height) - var(--tabbar-height));
  overflow:auto; /* 전환 중 튀어나오는 부분 숨김 */
  padding:0px !important;
}

/* 탭바가 없을 때 높이 보정 */
.mobile-mode .no-tabbar .views{
  min-height:calc(100dvh - var(--appbar-height));
}

/* 모바일 모드에서 앱바/탭바와 겹침 방지 패딩 */
.mobile-mode .views{
  padding-top: calc(var(--appbar-height) + env(safe-area-inset-top));
  padding-bottom: calc(var(--tabbar-height) + env(safe-area-inset-bottom));
  min-height:100vh;
}

.view{
  position:absolute; inset:0;
  opacity:0;
  pointer-events:none;
}
.view.active{
  opacity:1; transform:translateX(0);
  pointer-events:auto; z-index:2;
}

.mobile-mode .view .page{
  padding-top:calc(env(safe-area-inset-top) + var(--appbar-height));
  padding-bottom:calc(env(safe-area-inset-bottom) + var(--tabbar-height));
}
.dynamic-view .page{
  /* 동적 뷰 내부는 자체 헤더와만 겹침 고려 */
  padding-top: calc(var(--appbar-height) + env(safe-area-inset-top));
}

/* 방향 전환 클래스 */
.view.anim-in-right  { transform:translateX(24px); }
.view.anim-in-left   { transform:translateX(-24px); }
.view.anim-out-right { transform:translateX(24px); opacity:0; }
.view.anim-out-left  { transform:translateX(-24px); opacity:0; }

/* Offcanvas */
.offcanvas{
  position:fixed; top:0; bottom:0; width:min(80%,320px);
  background:#fff; transition:transform var(--transition); z-index:200;
  padding-top:calc(env(safe-area-inset-top));
  padding-bottom:calc(env(safe-area-inset-bottom));
}
.offcanvas.right{ inset:0 0 0 auto; border-left:1px solid #eee; transform:translateX(100%); }
.offcanvas.left{ inset:0 auto 0 0; border-right:1px solid #eee; transform:translateX(-100%); }
.offcanvas.open{ transform:translateX(0); }
.offcanvas-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.3);
  opacity:0; pointer-events:none; transition:opacity var(--transition); z-index:199;
}
.offcanvas-backdrop.show{ opacity:1; pointer-events:auto; }

/* Desktop mode: hide app UI, center content */
.desktop-mode .appbar,
.desktop-mode .tabbar{ display:none !important; }

.desktop-mode .views{
  /* min-height:auto; */
  max-width:100%;
  margin:0 auto;
  padding:24px 16px;     /* 데스크탑에서 여백 */
}

.ios .dynamic-view{
  transform:translateX(100%);
  transition: transform 360ms ease-in-out, opacity 360ms ease-in-out;
}
.ios .dynamic-view.active{ transform:translateX(0); }
.ios .dynamic-view.closing{ transform:translateX(100%); }

.android .dynamic-view{
  transform:translateY(100%);
  transition: transform 220ms ease-in-out, opacity 220ms ease-in-out;
}
.android .dynamic-view.active{ transform:translateY(0); }
.android .dynamic-view.closing{ transform:translateY(100%); }

.dynamic-view{
  position: fixed;
  overflow: auto;
  background: #fff;
  width: 100%;
  min-height: 100dvh;
  transform: translateX(100%);
  opacity: 1;
  z-index: 150;
  border-left: 1px solid #ddd;
  transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
}

.dynamic-view-backdrop{
  position: fixed; inset:0; background:rgba(0,0,0,.08);
  opacity:0; pointer-events:none; transition:opacity var(--transition); z-index:149;
}
.dynamic-view-backdrop.show{ opacity:1; pointer-events:auto; }

.dynamic-loading{
  position: fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background: rgba(255,255,255,0.6);
  opacity:0; pointer-events:none; transition: opacity var(--transition); z-index: 202;
}
.dynamic-loading.show{ opacity:1; pointer-events:auto; }
.dynamic-loading .spinner{
  width: 36px; height: 36px; border-radius: 50%;
  border: 3px solid rgba(0,0,0,.15); border-top-color: rgba(0,0,0,.6);
  animation: spin 0.8s linear infinite;
}
@keyframes spin{ to { transform: rotate(360deg); } }

/* pull-to-refresh indicator */
.pull-to-refresh{ position:absolute; top:calc(var(--appbar-height) + env(safe-area-inset-top)); left:0; right:0; height:0; overflow:hidden; z-index: 201; }
.pull-to-refresh .ptr-indicator{ height:48px; display:flex; align-items:center; justify-content:center; }
.pull-to-refresh .spinner{ width:20px; height:20px; border-radius:50%; border:2px solid rgba(0,0,0,.2); border-top-color: rgba(0,0,0,.7); animation: spin 0.8s linear infinite; }

/* splash overlay (mobile only) */
.splash-overlay{ position:fixed; inset:0; background:#fff; opacity:0; pointer-events:none; z-index: 300; transition: opacity 280ms ease; }
.splash-overlay.show{ opacity:1; pointer-events:auto; }
.splash-overlay.hide{ opacity:0; pointer-events:none; }

/* onboarding / intro overlays */
.onboarding-overlay,
.intro-overlay{ position:fixed; inset:0; background:#fff; opacity:0; pointer-events:none; transition: opacity 280ms ease; }
.intro-overlay{ z-index:301; }
.onboarding-overlay{ z-index:302; }
.onboarding-overlay.show,
.intro-overlay.show{ opacity:1; pointer-events:auto; }
.onboarding-overlay.hide,
.intro-overlay.hide{ opacity:0; pointer-events:none; }

/* .desktop-mode .dynamic-view{
  transform:translateX(100%);
} */

@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}
